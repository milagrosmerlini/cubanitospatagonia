<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cubanitos Patagonia</title>

  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#c97a2b">

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <link rel="icon" href="logo.png">
  <link rel="apple-touch-icon" href="logo.png">
</head>

<body>

  <!-- =========================
       HEADER
  ========================== -->
  <header class="topbar">
    <div class="header-left">
      <div class="logo">
        <img src="logo.png" alt="Cubanitos Patagonia">
      </div>
    </div>

    <div class="header-center">Cubanitos Patagonia</div>

    <div class="menuWrap">
      <button class="iconBtn" id="menu-btn" type="button">
        <span class="burger"></span>
        <span class="burger"></span>
        <span class="burger"></span>
      </button>

      <div class="menu" id="menu">
        <button class="menuItem" data-go="cobrar" type="button">Cobrar</button>
        <button class="menuItem" data-go="ventas" type="button">Ventas</button>
        <button class="menuItem" data-go="caja" type="button">Caja</button>
        <button class="menuItem" data-go="sesion" type="button">Sesión</button>
      </div>
    </div>
  </header>

  <main class="wrap">

    <!-- =========================
         TAB: COBRAR
    ========================== -->
    <section class="panel show" id="tab-cobrar">

      <!-- Selector de canal -->
      <div class="card channelTabs">
        <button class="channelTab active" id="tab-presencial" data-channel="presencial" type="button">
          Presencial
        </button>
        <button class="channelTab" id="tab-pedidosya" data-channel="pedidosya" type="button">
          PedidosYa
        </button>
      </div>

      <!-- Productos -->
      <div class="grid">

        <div class="card product" data-sku="cubanito_comun">
          <div class="row">
            <div>
              <h2>Cubanito común</h2>
              <p class="muted">$<span data-price="cubanito_comun"></span></p>
            </div>
            <div class="pill">Unidad</div>
          </div>
          <div class="counter">
            <button class="btn ghost" data-action="dec">−</button>
            <input class="qty" type="number" min="0" step="1" value="0" data-qty="cubanito_comun">
            <button class="btn ghost" data-action="inc">+</button>
          </div>
        </div>

        <div class="card product" data-sku="cubanito_blanco">
          <div class="row">
            <div>
              <h2>Cubanito choco blanco</h2>
              <p class="muted">$<span data-price="cubanito_blanco"></span></p>
            </div>
            <div class="pill">Unidad</div>
          </div>
          <div class="counter">
            <button class="btn ghost" data-action="dec">−</button>
            <input class="qty" type="number" min="0" step="1" value="0" data-qty="cubanito_blanco">
            <button class="btn ghost" data-action="inc">+</button>
          </div>
        </div>

        <div class="card product" data-sku="cubanito_negro">
          <div class="row">
            <div>
              <h2>Cubanito choco negro</h2>
              <p class="muted">$<span data-price="cubanito_negro"></span></p>
            </div>
            <div class="pill">Unidad</div>
          </div>
          <div class="counter">
            <button class="btn ghost" data-action="dec">−</button>
            <input class="qty" type="number" min="0" step="1" value="0" data-qty="cubanito_negro">
            <button class="btn ghost" data-action="inc">+</button>
          </div>
        </div>

        <div class="card product" data-sku="garrapinadas">
          <div class="row">
            <div>
              <h2>Garrapiñadas</h2>
              <p class="muted">$<span data-price="garrapinadas"></span> <span class="muted">c/u</span></p>
              <p class="hint">Promo: 3 por $3000</p>
            </div>
            <div class="pill">Bolsa</div>
          </div>
          <div class="counter">
            <button class="btn ghost" data-action="dec">−</button>
            <input class="qty" type="number" min="0" step="1" value="0" data-qty="garrapinadas">
            <button class="btn ghost" data-action="inc">+</button>
          </div>
        </div>

      </div>

      <!-- Total -->
      <div class="card summary">
        <div class="summary-top">
          <div>
            <h2>Total</h2>
            <p class="muted tiny" id="promo-line"></p>
          </div>
          <div class="total" id="total">$0</div>
        </div>

        <div class="splitpay">
          <h3>Pago</h3>

          <div class="payMode">
            <label class="chip">
              <input type="radio" name="paymode" value="cash" checked>
              <span>Efectivo</span>
            </label>
            <label class="chip">
              <input type="radio" name="paymode" value="transfer">
              <span>Transferencia</span>
            </label>
            <label class="chip">
              <input type="radio" name="paymode" value="mixed">
              <span>Mixto</span>
            </label>
          </div>

          <div id="mixed-area" class="hidden">
            <div class="split-grid">
              <label class="field">
                <span>Efectivo</span>
                <input id="cash" type="number" min="0" step="100">
              </label>
              <label class="field">
                <span>Transferencia</span>
                <input id="transfer" type="number" min="0" step="100">
              </label>
              <div class="field readonly">
                <span>Falta / Sobra</span>
                <div id="diff" class="diff">—</div>
              </div>
            </div>
          </div>

          <div class="actions">
            <button class="btn" id="btn-save">Guardar venta</button>
            <button class="btn ghost" id="btn-clear">Limpiar</button>
          </div>

          <p class="tiny muted" id="save-msg"></p>
        </div>
      </div>

    </section>

    <!-- =========================
         TABS RESTANTES
         (idénticos a los que ya tenías)
    ========================== -->

    <section class="panel" id="tab-ventas"></section>
    <section class="panel" id="tab-caja"></section>
    <section class="panel" id="tab-sesion"></section>

  </main>

  <footer class="footer muted tiny">
    Guardado en la nube (Supabase).
  </footer>

  <script>
    window.SUPABASE_URL = "https://sxrkcbjtdeirgxldvrvi.supabase.co";
    window.SUPABASE_ANON_KEY = "EYJ…"; // tu key real acá
    window.supabase = supabase.createClient(
      window.SUPABASE_URL,
      window.SUPABASE_ANON_KEY
    );
  </script>

  <script src="app.js"></script>
</body>
</html>
